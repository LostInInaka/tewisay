package main

import (
	"testing"
)

func TestBalloon(t *testing.T) {
	tests := []string{
		"this string has lots of unicodes\n" +
			"â˜†ã¦ã‚’å¯æ„›ã„âœˆtestØ¹Ø±Ø¨IÔ‰ï½”Ã«ï½’ï½Ã¥ï½”Ã­Ã²ï½É‘É­ï½‰ï½šÉ‘ï½”ï½‰ß€ï½Ù©(Í¡à¹Ì¯Í¡à¹)Û¶ Ù©(-Ì®Ì®Ìƒâ€¢Ìƒ).",
		"this has lots of colors\n" +
			"\x1b[32m   2.4M               \x1b[42m______\x1b[m \x1b[32m.\x1b[m\n" +
			"\x1b[33m   1.2M                  \x1b[43m___\x1b[m \x1b[33m.git/\x1b[m\n" +
			"\x1b[34m    36K                    \x1b[44m_\x1b[m \x1b[34mcows/\x1b[m\n" +
			"\x1b[35m    12K                    \x1b[45m_\x1b[m \x1b[35mswidth/\x1b[m\n" +
			"\x1b[36m   9.1M \x1b[46m____________________\x1b[m \x1b[36mtewisay-git/\x1b[m\n" +
			"\x1b[1m 12.75M                      Total\n" +
			"\x1b[m",
		"this\tone\thas\t\ttabs\ntetete\t\tte\nte\t\ttete",
	}
	expect := []string{
		`â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ this string has lots of unicodes[0m                               â”‚
â”‚ â˜†ã¦ã‚’å¯æ„›ã„âœˆtestØ¹Ø±Ø¨IÔ‰ï½”Ã«ï½’ï½Ã¥ï½”Ã­Ã²ï½É‘É­ï½‰ï½šÉ‘ï½”ï½‰ß€ï½Ù©(Í¡à¹Ì¯Í¡à¹)Û¶ Ù©(-Ì®Ì®Ìƒâ€¢Ìƒ).[0m â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`,
		`â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ this has lots of colors[0m                   â”‚
â”‚ [32m   2.4M               [42m______[m [32m.[m[0m            â”‚
â”‚ [32m[42m[m[32m[m[33m   1.2M                  [43m___[m [33m.git/[m[0m        â”‚
â”‚ [33m[43m[m[33m[m[34m    36K                    [44m_[m [34mcows/[m[0m        â”‚
â”‚ [34m[44m[m[34m[m[35m    12K                    [45m_[m [35mswidth/[m[0m      â”‚
â”‚ [35m[45m[m[35m[m[36m   9.1M [46m____________________[m [36mtewisay-git/[m[0m â”‚
â”‚ [36m[46m[m[36m[m[1m 12.75M                      Total[0m        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`,
		`â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ this	one	has		tabs[0m â”‚
â”‚ tetete		te[0m           â”‚
â”‚ te		tete[0m                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`,
	}

	for i := range tests {
		ret := balloon(tests[i], borders["unicode"])
		if ret != expect[i] {
			t.Errorf("Expected:\n%s\nGot:\n%s\n", expect[i], ret)
		}
	}
}
